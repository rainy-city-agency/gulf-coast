{% form 'product', product, class: "mt-md-4", data-product-form: "", data-product-id: product.id, data-productid: product.id %}
  {% comment %}
    Automatically inserted by Shop Pay Installments theme updater
  {% endcomment %}
  {% unless settings.disable_autogenerated_payment_terms %}
    {{ form | payment_terms }}
  {% endunless %}

  <template v-for="(option, index) in product.options_with_values" v-if="option.name != 'Title'">
    <input type="hidden" :name="'product_options_'+ currentVariant.id +'[]'" v-model="JSON.stringify(option)" />
  </template>

  <div class="row">
    <div class="col-12 mb-2">
      {% unless product.has_only_default_variant %}
        {% for option in product.options_with_values %}
          {% assign option_name = option.name | downcase %}
          <div class="selector-wrapper">
            <label class="" for="SingleOptionSelector-{{ forloop.index0 }}">
              {{ option.name }}
            </label>
            {% if enable_color_swatches and option_name == 'color' %}
              {% comment %} Color swatches {% endcomment %}
              <ul class="list-unstyled list-inline my-0 py-0">
                {% for value in option.values %}
                  <li class="list-inline-item">
                    <div class="color-swatch">
                      <label
                          data-toggle="tooltip"
                          data-trigger="hover"
                          title="{{ value | escape | replace: '-', ' ' }}"
                          :style="_getSwatchStyle('{{ value }}')">
                          <input
                            type="radio"
                            name="color"
                            aria-label="color"
                            value="{{ value | escape }}"
                            data-single-option-selector
                            data-index="option{{ option.position }}"
                            @change="_getVariant($event)"
                            {% if option.selected_value == value %}checked="checked"{% endif %} >
                      </label>
                    </div>
                  </li>
                {% endfor %}
              </ul>

            {% elsif enable_size_swatches and option_name == 'size' %}
              {% comment %} Size swatches {% endcomment %}
              <ul class="list-unstyled list-inline my-0 py-0">
                {% for value in option.values %}
                  <li class="list-inline-item">
                    <div class="size-swatch">
                      <label>
                          <input
                            data-single-option-selector
                            type="radio"
                            name='size'
                            aria-label="size"
                            value="{{ value | escape }}"
                            data-index="option{{ option.position }}"
                            @change="_getVariant($event)"
                            {% if option.selected_value == value %}checked="checked"{% endif %} >
                      </label>
                    </div>
                  </li>
                {% endfor %}
              </ul>

            {% else %}
              {% comment %} Normal select {% endcomment %}
              <select
                class="form-control form-control-sm"
                data-single-option-selector
                data-index="option{{ option.position }}"
                @change="_getVariant($event)">
                {% for value in option.values %}
                  <option
                    value="{{ value | escape }}"
                    {% if option.selected_value == value %}selected="selected"{% endif %}>
                      {{ value }}
                  </option>
                {% endfor %}
              </select>
            {% endif %}
          </div>
        {% endfor %}

      {% endunless %}

        <!-- Extend -- Add offer element -->
        <div id="extend-offer"></div>
        <!-- Extend -- End Extend code -->
      
    </div>

  </div>


  {% comment %} DEFAULT HIDDEN OPTIONS SELECT {% endcomment %}
  {% comment %} DO NOT REMOVE THIS {% endcomment %}
  <div class="row" style="display: none !important;">
    <div class="col">
        <select name="id" data-productid="{{ product.id }}">
          {% for variant in product.variants %}
              <option
                data-sku="{{ variant.sku }}"
                value="{{ variant.id }}"
                data-product-id="{{ product.id }}"
                data-variant-id="{{ variant.id }}"
                data-discount-variant-id="{{ variant.metafields.subscriptions.discount_variant_id }}">
                {{ variant.title }} - {{ variant.price | money_with_currency }}
              </option>
          {% endfor %}
        </select>
    </div>
  </div>
  <div class="d-flex form-button-wrapper">
    <div class="d-flex align-items-center form-quantity-wrapper " data-qty-container>
      <div class="input-group input-group-sm h-100">
        <button class="bg-transparent border-0 pr-0" data-qty-decrease @click.prevent="_updateQty($event)" ><img src="https://cdn.shopify.com/s/files/1/0541/8313/3361/files/Minus_icon.svg?v=1647868143" alt=""></button>
        <input type="text" id="quantity" name="quantity" aria-label="quantity" value="1" min="1" placeholder="1" inputmode="numeric" data-qty-input class="h-100 p-0 quantity form-control text-center bg-transparent border-0">
        <button class="bg-transparent border-0 pl-0" data-qty-increase @click.prevent="_updateQty($event)"><img src="https://cdn.shopify.com/s/files/1/0541/8313/3361/files/plus_icon.svg?v=1647868143" alt=""></button>
      </div>
    </div>
    <button class="btn btn-primary btn-block text-uppercase btn-lg w-100 d-inline-flex align-items-center justify-content-center"
      type="submit"
      name="add"
      :disabled="!currentVariant.available"
      :data-cart-limit="product.cart_limit"
      data-default-variant-id="{{ current_variant.id }}"
      @click.prevent="_addToCart(currentVariant.id, $event)">
        <template v-if="isLoading && loadingEvent == 'cartAdding'">
          <span class="spinner-border spinner-border-sm d-flex align-items-center justify-content-center" role="status" aria-hidden="true"></span> {{ 'general.wait' | t }}
        </template>
        <template v-else>
          <span v-if="currentVariant.available">
          {% comment %} <i class="icon ion-md-cart"></i>  {% endcomment %}
          {{ 'products.product.add_to_cart' | t }}</span>
          <span v-else>{{ 'products.product.unavailable' | t }}</span>
        </template>
    </button>
  </div>

  <div class="row mt-3">
    <div class="col-12 mb-4">
      
      {% comment %} Dynamic Checkout Button {% endcomment %}
      {% comment %} {% unless product.metafields.subscriptions.subscription_id %}
        <div class="mt-2">{{ form | payment_button }}</div>
      {% endunless %} {% endcomment %}

      {% if additional_checkout_buttons %}
          <span class="additional-checkout-buttons mt-2">
              <div id="additional-checkout-buttons" class="w-100">
              {{ content_for_additional_checkout_buttons }}
              </div>
          </span>
      {% endif %}

      <div class="added-wishlist pt-1 text-center mt-3">
        <!-- Swym button on product pages -->
        <div class="swym-wishlist-button-bar"></div>
        <!-- Swym button on product pages -->
      </div>
    {% comment %}
      {% if settings.enable_wishlist %}
        <div class="mt-4">
          <div v-if="!_checkWishlist(currentVariant.id)">
            <a class="text-decoration font-size-ex-lg" href="#" @click.prevent="_addVariantToWishlist(product.handle, currentVariant.id, $event)" rel="nofollow">
              {{ 'general.wishlist.add_to_wishlist' | t }}
            </a>
            <i class="fas fa-gift pl-2 font-size-md"></i>
          </div>
          <div v-else>
            <span class="text-gray-700">Added to <a href="#" data-toggle="modal" data-target="[data-modal-wishlist]" tabindex="-1">Wishlist</a><i class="fas fa-gift text-gray-700"></i></span>
          </div>
        </div>
      {% endif %}
    {% endcomment %}

    <!-- <div class="mt-2"> -->
      <!-- <span class="additional-checkout-buttons mt-2">
        <div id="additional-checkout-buttons">
        {{ content_for_additional_checkout_buttons }}
        </div>
    </span> -->
    <!-- </div> -->
    </div>
  </div>

{% endform %}

<!-- Extend -- Load product integration script -->
{% render 'extend-product-integration' %}
<!-- Extend -- End Extend code -->